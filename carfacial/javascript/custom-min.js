$(document).ready(function(){var a="";jQuery("#mycarousel").jcarousel({size:38,visible:8,scroll:8});$("#qty").val(1);$("#hiddenModalContent").hide();$("#checkout_page").hide();$("#mirror_checkbox").attr("checked",false);$("#mycarousel img").addClass("selected_color2");f();function f(){cookie=d("carfacial");if(cookie){a=cookie.split(" ");var h="";for(i=0;i<a.length;i++){h=a[i].split(",");cart.push({car_num:h[0],qty:h[1],color:h[2],mirror:h[3]});total_price+=mycars[cart[i].car_num].price*cart[i].qty;num_of_items+=parseInt(cart[i].qty)}$("#num_of_items").text(num_of_items+" items");$("#total_price").text("$"+total_price.toFixed(2));createCookie("carfacial",cookie,7)}else{cookie=""}}$("#mycarousel img").click(function(){var h;h=c(this);e(h);$("#qty").val(1);$("#colors a img").removeClass("selected_color");$("#color_black").addClass("selected_color");if(mycars[current_car].mirror=="yes"){$("#mirror").show()}else{$("#mirror").hide()}$("#mirror_checkbox").attr("checked",false)});function c(j){var h="big_"+$(j).attr("src");h=h.replace("big_images/","big_");h=h.replace("png","jpg");$("#main_pic").attr("src","images/"+h);return h}function e(h){var n=h.indexOf("car");n=n+3;var m=h.indexOf(".");car_number=h.substring(n,m)-1;current_car=car_number;var j=mycars[car_number].name;var l=mycars[car_number].price;var k=mycars[car_number].size;$("#name").text(j);$("#price").text("$"+l);$("#size").text(k);current_price=l}$("#add_to_cart").click(function(){var h=parseInt($("#qty").val());if($("#mirror_checkbox").is(":checked")){isMirror=true}else{isMirror=false}UpdateNumItemOnScreen(h);UpdateCart(h);UpdateTotalPrice(h);SaveCookie();$("#cart_status").effect("highlight",{color:"#ffffff"},1000)});function d(j){var l=j+"=";var h=document.cookie.split(";");for(var k=0;k<h.length;k++){var m=h[k];while(m.charAt(0)==" "){m=m.substring(1,m.length)}if(m.indexOf(l)==0){return m.substring(l.length,m.length)}}return null}$(".popuptest").click(function(){centerPopup();loadPopup();UpdateCartPage()});$("#checkout_nav").click(function(){$("#contactArea").hide();$("#checkout_page").show();$("#popup_title").text("Checkout");b();UpdateCartPage();UpdateCheckoutPage()});function b(){var j;var m="";var h="";var l="";var k="";for(j=0;j<cart.length;j++){if(cart[j].mirror===true){l=" (Mirror image)."}else{l=""}k=mycars[cart[j].car_num].name+", "+cart[j].color+l;m+='<input type="hidden" name="item_name_'+String(j+1)+'" value="'+k+'"/>';m+='<input type="hidden" name="item_description_'+String(j+1)+'" value="'+mycars[cart[j].car_num].size+" Car Sticker. Color: "+cart[j].color+'"/>';m+='<input type="hidden" name="item_quantity_'+String(j+1)+'" value="'+cart[j].qty+'"/>';m+='<input type="hidden" name="item_price_'+String(j+1)+'" value="'+mycars[cart[j].car_num].price+'"/>';h+='<input type="hidden" name="item_name_'+String(j+1)+'" value="'+k+'">';h+='<input type="hidden" name="amount_'+String(j+1)+'" value="'+mycars[cart[j].car_num].price+'">';h+='<input type="hidden" name="quantity_'+String(j+1)+'" value="'+cart[j].qty+'">'}$("#google_form").append(m);$("#paypal_form").append(h)}$("#back_to_checkout_nav").click(function(){$("#contactArea").show();$("#checkout_page").hide();$("#popup_title").text("Please review your order")});$("#continue_shopping").click(function(){disablePopup()});$("#popupContactClose").click(function(){disablePopup()});$("#backgroundPopup").click(function(){disablePopup()});$(document).keypress(function(h){if(h.keyCode==27&&popupStatus==1){disablePopup()}});$("#update_cart").click(function(){var j;var k;var h;var l=0;for(j=0;j<cart.length;j++){k=parseInt(cart[j].qty);h=parseInt(document.getElementById("cart_row_qty"+j).value);if(isNaN(h)){h=0}l+=(h-k)*mycars[cart[j].car_num].price;update_unit(j,h-k);if(h==0){RemoveItemfromCart(j)}}UpdateTotalPriceOnScreen(l);UpdateCartPage()});$("#colors a img").click(function(){var h=$(this).attr("src");$("#colors a img").removeClass("selected_color");$(this).addClass("selected_color");h=g(h);current_color=h;h="Select a color: "+h;$("#color_selection").text(h)});function g(h){h=h.replace("images/","");h=h.substring(0,1).toUpperCase()+h.substring(1,h.length-4);return h}});var mycars=[{name:"Three Swirl",size:'20"x10"',price:"20.00",mirror:"yes"},{name:"Hana",size:'20"x15"',price:"20.00",mirror:"yes"},{name:"Dragon",size:'8"x8"',price:"10.00",mirror:"yes"},{name:"Blossom",size:'14"x8"',price:"20.00",mirror:"yes"},{name:"Deco",size:'8"x8"',price:"10.00",mirror:"yes"},{name:"Outline Swirl",size:'20"x10"',price:"20.00",mirror:"yes"},{name:"Grapevine",size:'20"x8"',price:"20.00",mirror:"yes"},{name:"Cherry",size:'6"x6"',price:"10.00",mirror:"yes"},{name:"Disco",size:'12"x8"',price:"15.00",mirror:"yes"},{name:"Kona",size:'15"x10"',price:"20.00",mirror:"yes"},{name:"Fairy",size:'20"x20"',price:"20.00",mirror:"yes"},{name:"Aki",size:'12"x6"',price:"15.00",mirror:"yes"},{name:"Guardian Angel",size:'10"x10"',price:"15.00",mirror:"yes"},{name:"Curly Leaves",size:'20"x15"',price:"20.00",mirror:"yes"},{name:"Madam",size:'14"x7"',price:"15.00",mirror:"no"},{name:"Autumn",size:'12"x8"',price:"10.00",mirror:"yes"},{name:"Ribbon",size:'20"x15"',price:"20.00",mirror:"yes"},{name:"Five Leaf",size:'5"x5"',price:"10.00",mirror:"yes"},{name:"Skel",size:'15"x5"',price:"20.00",mirror:"yes"},{name:"Splash",size:'15"x8"',price:"10.00",mirror:"yes"},{name:"Clove",size:'9"x5"',price:"10.00",mirror:"yes"},{name:"Sage",size:'20"x10"',price:"20.00",mirror:"yes"},{name:"Wings",size:'8"x8"',price:"10.00",mirror:"yes"},{name:"Tribal",size:'20"x7"',price:"20.00",mirror:"yes"},{name:"Gift",size:'20"x10"',price:"20.00",mirror:"yes"},{name:"Tripulp",size:'20"x10"',price:"20.00",mirror:"yes"},{name:"Multi Swirl",size:'20"x16"',price:"20.00",mirror:"yes"},{name:"Elize",size:'25"x20"',price:"20.00",mirror:"yes"},{name:"Riley",size:'17"x10"',price:"15.00",mirror:"yes"},{name:"Estelle",size:'20"x20"',price:"20.00",mirror:"yes"},{name:"Circ",size:'10"x6"',price:"6.99",mirror:"yes"},{name:"Single Fall Leaf",size:'12"x8"',price:"10.00",mirror:"yes"},{name:"Autumn Leaves",size:'20"x15"',price:"20.00",mirror:"yes"},{name:"Retro",size:'15"x12"',price:"15.00",mirror:"yes"},{name:"Jazz",size:'23"x20"',price:"20.00",mirror:"yes"},{name:"Illusion",size:'20"x15"',price:"20.00",mirror:"yes"},{name:"Shrub",size:'20"x10"',price:"20.00",mirror:"yes"},{name:"Fall Leaf",size:'12"x8"',price:"10.00",mirror:"yes"}];var cart=[];var num_of_items=0;var total_price=0;var current_car=0;var current_price=20;var current_color="Black";var shipping=6.99;var isMirror=false;var cookie="";function UpdateCartPage(){var g="";var d=0;var c;var e;var a;var b;var f="";if(cart.length>0){g+='<table class="cart_table">';g+='<tr class="table_top_row"><td class="table_item">Item Name</td><td class="table_price">Price</td><td></td><td class="table_qty">Quantity</td><td></td><td class="table_total">Total</td><td></td></tr>';for(d=0;d<cart.length;d++){if(cart[d].mirror===true){f=" (Mirror image)"}c=mycars[cart[d].car_num].name+", "+cart[d].color+f;e=cart[d].qty;a=mycars[cart[d].car_num].price;b=a*e;b=b.toFixed(2);g+='<tr id="cart_row'+d+'"><td>'+c+"</td>";g+='<td class="table_price2">$'+a+"</td>";g+="<td>X</td>";g+='<td class="table_qty2"><input type="text" onKeyUp="javascript:DeleteNonNumeric(event,'+d+');true" id="cart_row_qty'+d+'" size="1" maxlength="2" value="'+e+'" /></td>';g+='<td class="table_equal_sign" >=</td>';g+='<td class="table_total2">$'+b+"</td>";g+='<td class="table_remove"><a style="text-decoration:underline;" onClick="javascript:RemoveItemfromCart('+d+');return true">remove</a></td></tr>'}g+="</table>";$("#cartarea").html("");$("#cartarea").append(g);$(".sub_total").text("$"+total_price.toFixed(2));$(".shipping").text("$"+shipping);$(".total").text("$"+parseFloat(total_price+shipping).toFixed(2));$(".totals").show();$("#update_cart").show();$("#checkout_nav").show();SaveCookie()}else{$("#popup_title").text("Your cart is empty");$(".cart_table").hide();$(".totals").hide();$("#update_cart").hide();$("#checkout_nav").hide();createCookie("carfacial","",-1)}}function UpdateCheckoutPage(){var g="";var d=0;var c;var e;var a;var b;var f="";g+='<table class="cart_table">';g+='<tr class="table_top_row"><td class="table_item">Item Name</td><td class="table_price">Price</td><td></td><td class="table_qty">Quantity</td><td></td><td class="table_total">Total</td><td></td></tr>';for(d=0;d<cart.length;d++){if(cart[d].mirror===true){f=" (Mirror image)"}c=mycars[cart[d].car_num].name+", "+cart[d].color+f;e=cart[d].qty;a=mycars[cart[d].car_num].price;b=a*e;b=b.toFixed(2);g+='<tr class="cart_row'+d+'"><td>'+c+"</td>";g+='<td class="table_price2">$'+a+"</td>";g+="<td>X</td>";g+='<td class="table_qty2">'+e+"</td>";g+='<td class="table_equal_sign" >=</td>';g+='<td class="table_total2">$'+b+"</td>";g+='<td id="table_remove"></td></tr>'}g+="</table>";$("#cartarea2").html("");$("#cartarea2").append(g);$("#sub_total").text("$"+total_price.toFixed(2));$("#shipping").text("$"+shipping);$("#total").text("$"+parseFloat(total_price+shipping).toFixed(2));$(".totals").show()}function UpdateNumItemOnScreen(a){num_of_items=a+num_of_items;$("#num_of_items").text(num_of_items+" items")}function UpdateTotalPriceOnScreen(a){total_price+=a;$("#total_price").text("$ "+total_price.toFixed(2))}function UpdateCart(b,a){var a=-1;a=IsItemInCart();if(a>-1){cart[a].qty+=b}else{cart.push({car_num:current_car,qty:b,color:current_color,mirror:isMirror})}}function UpdateTotalPrice(a){total_price+=parseFloat(current_price)*a;$("#total_price").text("$"+total_price.toFixed(2))}function IsItemInCart(){var a;for(a=0;a<cart.length;a++){if(cart[a].car_num===current_car&&cart[a].color===current_color&&cart[a].mirror===isMirror){return a}}return -1}var popupStatus=0;function loadPopup(){if(popupStatus==0){$("#qty").hide();$("#backgroundPopup").css({opacity:"0.7"});$("#backgroundPopup").show();$("#popupContact").show();popupStatus=1}}function disablePopup(){if(popupStatus==1){$("#qty").show();$("#backgroundPopup").hide();$("#popupContact").hide();$("#contactArea").show();$("#checkout_page").hide();$("#popup_title").text("Please review your order");popupStatus=0}}function centerPopup(){var a=document.documentElement.clientWidth;var d=document.documentElement.clientHeight;var c=$("#popupContact").height();var b=$("#popupContact").width();$("#popupContact").css({position:"absolute",top:d/2-c/2,left:a/2-b/2});$("#backgroundPopup").css({height:d})}function RemoveItemfromCart(a){$("#cart_row"+a).remove();UpdateNumItemOnScreen((cart[a].qty)*-1);UpdateTotalPriceOnScreen(cart[a].qty*mycars[cart[a].car_num].price*-1);cart.splice(a,1);UpdateCartPage()}function update_unit(a,b){UpdateNumItemOnScreen(b);cart[a].qty=parseInt(cart[a].qty)+b}function DeleteNonNumeric(d,a){var g;var f;var c;var b;if(window.event){g=d.keyCode}else{if(d.which){g=d.which}}f=String.fromCharCode(g);c=/\d/;if(!c.test(f)){b=document.getElementById("cart_row_qty"+a).value;b=stripAlphaChars(b);document.getElementById("cart_row_qty"+a).value=b}}function stripAlphaChars(a){var b=new String(a);b=b.replace(/[^0-9]/g,"");return b}function SaveCookie(){var a;cookie="";for(a=0;a<cart.length;a++){cookie+=cart[a].car_num+","+cart[a].qty+","+cart[a].color+","+cart[a].mirror+" "}createCookie("carfacial",cookie,7)}function createCookie(c,d,e){if(e){var b=new Date();b.setTime(b.getTime()+(e*24*60*60*1000));var a="; expires="+b.toGMTString()}else{var a=""}document.cookie=c+"="+d+a+"; path=/"};